星期万年历
##########
:date: 2011-08-10 22:25
:modified: 2011-08-10 22:25
:author: Calf
:category: 有用知识
:tags: Perpetual Calendar
:keywords: Day of Week, 万年历, 星期几
:slug: calendar-of-week
:lang: zh_cn
:featured_image: http://www.gocalf.com/blog/images/2011/08/calendar_day_of_week.png
:summary: 小学的时候看到过计算某年某月某日是星期几的方法，当时觉得好神奇啊，当时一直不明白为什么一个简简单单的式子或者一张表格就能够算出任何一天是星期几呢。让我们回忆一下孩童时期的乐趣吧，或许以后可以用来逗孩子玩呢。
:depends: mathjax

.. contents::

还记得小学的时候看到过计算某年某月某日是星期几的方法，当时觉得好神奇啊，当时一直不明白为什么一个简简单单的式子或者一张表格就能够算出任何一天是星期几呢，这些方法伴随我度过了整个童年。

长大后就知道了它们的原理，因为星期是七天为一个周期，只要已知某一天是星期几，要算任何一天是星期几只要求出两个日子之间的天数就可以了。现在的编程语言几乎全都包含了获得星期的方法，程序员们再也不用为此发愁。但还是让我们回忆一下孩童时期的乐趣吧，或许以后可以用来逗孩子玩呢。

.. more

公式法计算星期几
----------------

这是我最早知道的计算某一天是星期几的方法，还曾经在同学的Casio可编程计算器上做了个简单的程序来自动计算，真是有趣的回忆。

设Y是公元年数（比如今年的话，Y等于2011），D是从同年元旦到指定的这天未为止的天数（包含这一天，比如1月1号的话，D就是1），那么指定日期的星期数为：

.. math::

    W=\left((Y-1)+\left\lfloor\frac{Y-1}{4}\right\rfloor-\left\lfloor\frac{Y-1}{100}\right\rfloor+\left\lfloor\frac{Y-1}{400}\right\rfloor+D\right)\bmod7

结果0代表周日，1～6分别代表星期一～星期六。

以今天为例，2011年8月10日，先求出今年元旦到今天有多少天（包含今天），显然D=31+28+31+30+31+30+31+10=222，代入公式得到：

.. math::

    \begin{array}{rcl}
    W & = & \left((2011-1)+\left\lfloor\frac{2011-1}{4}\right\rfloor-\left\lfloor\frac{2011-1}{100}\right\rfloor+\left\lfloor\frac{2011-1}{400}\right\rfloor+222\right)\bmod7 \\
    & = & (2010+502-20+5+222)\bmod7 \\
    & = & 2719\bmod7 \\
    & = & 3
    \end{array}

今天是周三，没错呢。

表格法计算星期几
----------------

上面的公式虽然简单明了，但对于小学时候的我却还是非常头疼的，四则运算不过关的人伤不起啊！下面这个表格法则没有任何计算了，我还特意添加了JavaScript使得它更容易使用。

使用方法非常简单，比如还是看今天是星期几，按照以下三步进行：

#. 在百年数区域里找到20，在年份后两位数字区域里找到11。由20所在横行向右，11所在竖行向下，交于F。
#. 在月份区域里找到8，向左在同一横行里找到F。
#. 在日期区域里找到10，在同一横行向左，同时由（第2步中找到的）F所在竖行向下，与10所在横行相交于星期区域里的“三”。

可见同样求出今天是星期三。

另外注意在月份区域中的1'和2'分别表示闰年的1月和2月。比如算2000年1月某天是星期几，就要在月份区域里选择1'。

猛烈点击\ `这里（calendar\_week.html）`_\ 可以在新的页面中打开星期万年历表格。如果你的浏览器支持IFRAME，可以在文章底部看到同样的表格。

啰嗦两句
--------

根据公式或者表格都可以算出公元1年1月1日是星期一，那天到底是不是星期一呢？我不知道，而且也没有实际的意义，因为这个历法是罗马教皇格里高利十三世在1582年10月15日启用的，而英国及其殖民地直到1752年9月14日才使用现在的历法，所以算这之前甚至公元前某日是星期几毫无意义。另外，1582年2月24日教皇下令去除1582年10月5日至14日，1752年英国国会下令去除1752年9月3日至13日，所以1752年9月14日是星期四，但1752年9月2日却是星期三而不是星期六。
这也是为什么我在表格的百年数区域里从15开始写。

附：放在IFRAME里面的星期万年历表格
----------------------------------

.. raw:: html

    <iframe frameborder="0" height="1060" name="星期万年历" scrolling="yes" src="{static}/assets/2011/08/calendar_week.htm" title="Week Calendar" width="100%"></iframe>

.. _这里（calendar\_week.html）: {static}/assets/2011/08/calendar_week.htm
