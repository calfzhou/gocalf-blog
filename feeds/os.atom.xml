<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>GoCalf Blog - 操作系统</title><link href="https://blog.gocalf.com/" rel="alternate"></link><link href="https://blog.gocalf.com/feeds/os.atom.xml" rel="self"></link><id>https://blog.gocalf.com/</id><updated>2012-03-02T23:09:00+08:00</updated><subtitle>1/100 ALGO&amp;amp;MATH; 1/100 IT&amp;amp;GAME; 1/100 INFO&amp;amp;SHARING; 1/100 WHO KNOWS</subtitle><entry><title>解决黑苹果 Unable to Determine UUID 错误</title><link href="https://blog.gocalf.com/hackintosh-fix-uuid" rel="alternate"></link><published>2012-03-02T23:09:00+08:00</published><updated>2012-03-02T23:09:00+08:00</updated><author><name>Calf</name></author><id>tag:blog.gocalf.com,2012-03-02:/hackintosh-fix-uuid</id><summary type="html">&lt;p class="first last"&gt;前几天在写 app 的最后阶段要进行本地化（localization），其中要做的一件事就是创建语言文件（Localizable.strings）。要在控制台运行 genstrings 命令来扫描源代码中 NSLocalizedString 宏所使用到的文字。由于使用的是黑苹果，在运行 genstrings 时遇到了“Unable to Determine UUID”的错误，解决方法倒也容易。&lt;/p&gt;
</summary><content type="html">&lt;p&gt;前几天在写 app 的最后阶段要进行本地化（localization），其中要做的一件事就是创建语言文件（Localizable.strings）。要在控制台运行 genstrings 命令来扫描源代码中 NSLocalizedString 宏所使用到的文字。由于使用的是黑苹果（安装过程参见 &lt;a class="reference external" href="https://blog.gocalf.com/dell-e6400-install-mac"&gt;Dell E6400 安装 MacOS 雪豹 10.6&lt;/a&gt; 和 &lt;a class="reference external" href="https://blog.gocalf.com/dell-e6400-mac-10-6-8"&gt;Dell E6400 升级到 MacOS 10.6.8&lt;/a&gt;），在运行 genstrings 时遇到了“Unable
to Determine UUID”的错误，解决方法倒也容易。&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;运行 genstrings 的语句是：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;genstrings ./Classes/*.m
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;得到了这样的错误信息：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;genstrings[3851:10b] _CFGetHostUUIDString: unable to determine UUID for host. Error: 35
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;虽然想不通这么个小程序为什么需要 UUID，但解决方法是：进入目录 /Library/Preferences/SystemConfiguration，用 root 权限修改其中的 NetworkInterfaces.plist 文件，在控制台的操作命令为：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; /Library/Preferences/SystemConfiguration
sudo vi NetworkInterfaces.plist
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;给这个文件中添加一个 IEEE80211 相关的 dict（原本会有其他一些 dict，不用管它们），内容如下：&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;dict&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;key&amp;gt;&lt;/span&gt;BSD Name&lt;span class="nt"&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;string&amp;gt;&lt;/span&gt;en3&lt;span class="nt"&gt;&amp;lt;/string&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;key&amp;gt;&lt;/span&gt;IOBuiltin&lt;span class="nt"&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;false/&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;key&amp;gt;&lt;/span&gt;IOInterfaceType&lt;span class="nt"&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;integer&amp;gt;&lt;/span&gt;6&lt;span class="nt"&gt;&amp;lt;/integer&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;key&amp;gt;&lt;/span&gt;IOInterfaceUnit&lt;span class="nt"&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;integer&amp;gt;&lt;/span&gt;3&lt;span class="nt"&gt;&amp;lt;/integer&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;key&amp;gt;&lt;/span&gt;IOLocation&lt;span class="nt"&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;string&amp;gt;&amp;lt;/string&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;key&amp;gt;&lt;/span&gt;IOMACAddress&lt;span class="nt"&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;data&amp;gt;&lt;/span&gt;ABbPoF5V&lt;span class="nt"&gt;&amp;lt;/data&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;key&amp;gt;&lt;/span&gt;IOPathMatch&lt;span class="nt"&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;string&amp;gt;&lt;/span&gt;IOService:/AppleACPIPlatformExpert/PCI0@0/AppleACPIPCI/P0P3@1C,2/IOPCI2PCIBridge/pci14e4,4311@0/AirPort_Brcm43xx/IO80211Interface&lt;span class="nt"&gt;&amp;lt;/string&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;key&amp;gt;&lt;/span&gt;SCNetworkInterfaceType&lt;span class="nt"&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;string&amp;gt;&lt;/span&gt;IEEE80211&lt;span class="nt"&gt;&amp;lt;/string&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/dict&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;添加好后保存此文件，然后重启系统。问题就解决了。&lt;/p&gt;
</content><category term="操作系统"></category><category term="Hackintosh"></category></entry><entry><title>Dell E6400 升级到 MacOS 10.6.8</title><link href="https://blog.gocalf.com/dell-e6400-mac-10-6-8" rel="alternate"></link><published>2011-08-26T23:48:00+08:00</published><updated>2012-03-02T21:45:00+08:00</updated><author><name>Calf</name></author><id>tag:blog.gocalf.com,2011-08-26:/dell-e6400-mac-10-6-8</id><summary type="html">&lt;p class="first last"&gt;半年前安装黑苹果的经历，装的是 10.6.3。最近由于有些软件需要较高版本的系统，不得不对系统进行升级，升级到雪豹的最后一个版本 10.6.8。升级后自然又遇到了一堆问题并逐一解决。解决得算是基本完美了，只差我那全球无解的 Intel WiFi Link 5300 AGN 无线网卡和不能休眠的问题。&lt;/p&gt;
</summary><content type="html">&lt;p&gt;在 &lt;a class="reference external" href="https://blog.gocalf.com/dell-e6400-install-mac"&gt;Dell E6400 安装 MacOS 雪豹 10.6&lt;/a&gt; 中介绍了半年前安装黑苹果的经历，当时安装的版本其实是 10.6.3。最近由于有些软件需要较高版本的系统，不得不对系统进行升级，升级到雪豹的最后一个版本 10.6.8。升级后自然又遇到了一堆问题并逐一解决。解决得算是基本完美了，只差我那全球无解的 Intel
WiFi Link 5300 AGN 无线网卡和不能休眠的问题。&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;还是上次那台机器，硬件配置完全没有变，就不再重复了。黑苹果之所以难装，除了核心的破解之外就全是驱动的问题了，来看看这次都遇到了哪些问题又是如何解决的。&lt;/p&gt;
&lt;p&gt;前天（8 月 24 日）晚上，决定要升级系统（没过多久，老乔就辞职了，都怪我啊，hoho）。直接在系统里面点击 Software
Update，用了两个多小时下载了升级包。昨天早晨爬起来之后点击更新，很快就装好了，重启，不出所料地白苹果了。&lt;/p&gt;
&lt;p&gt;我们知道黑苹果常见的启动错误形式有：白苹果（灰白色背景上一个灰色的苹果图标，再无进展）、无限风火轮（在刚才那个苹果图片下面有一个风火轮在转动，但再无进展）和四国 / 五国（以四种 / 五种语言书写的当机提示）。这种情况下就只能长按电源键强制关机了。&lt;/p&gt;
&lt;p&gt;再次开机，在 BootThink 引导的时候输入 -v 进入 verbose 模式，查看系统 hang 在什么地方。发现在显示了 [PCI
configuration end] 之后就停住了，这似乎是 Snow Leopard 10.6.8 和 Lion
10.7.1 都会遇到的问题呢，原来是 IOPCIFamily.kext 和 AppleACPIPlatform.kext 被更新了，解决办法简单粗暴，直接找个老版本（10.6.7）的替换回去就好了。不过我把它们放在 BootThink 的 Darwain\System\LibrarySL\Extensions\ 里面并不能解决问题，得要放到 Mac 分区去。如果有安装盘，可以用 BootThink 引导安装盘，在 Console 里面进行复制的操作，但我上次用来安装的硬盘分区早就格式化掉了，只好用 &lt;a class="reference external" href="http://bbs.pcbeta.com/forum-viewthread-tid-860881-highlight-macdriver.html"&gt;MacDrive（v8.0.5.31）&lt;/a&gt; 来操作。把那两个 kext 复制到 Mac 所在分区的 /System/Library/Extensions 里。&lt;/p&gt;
&lt;p&gt;再次启动 Mac OS，刚才的问题没有了，这次遇到的是 Can't load kext
com.apple.driver.AudioIPCDriver, link
fail。要删掉 BootThink 里的 VoodooHDA.kext。不过这样不就不能驱动声卡了吗？先不管它了。&lt;/p&gt;
&lt;p&gt;接下来遇到的是 FakeSMC: key info not found MSDS, length
-6。看来我的 FakeSMC.kext 太古老了，找了个新版本的放进 BootThink 就好了。&lt;/p&gt;
&lt;p&gt;然后又发现在显示了 NTFS Volume xxxx, version
3.1 之后，系统又 hang 住了。不知道到底为什么，但放了一个原版声卡驱动 AppleHDA.kext 进来就好了。（简直是有病乱投医啊）&lt;/p&gt;
&lt;p&gt;再次启动，顺利进入系统，很开心。但是声卡没有驱动起来呢，是因为之前把 VoodooHDA.kext 去掉的原因吗？傻乎乎地又把它放回来，竟然没有当机，成功进入系统。这回有声卡了，但是没有声音，汗。换了个 VoodooHDA.kext，hoho，有声音了。可是音量无法改变，即使静音状态也是一样大的声音。似乎也有人遇到类似的问题呢，又更新了一下 VoodooHDA.kext，这次音量调节也正常了。&lt;/p&gt;
&lt;p&gt;在更新我所需要的软件的时候，还有插入优盘的时候，都遇到个错误提示，说是 the
system extension /System/Library/Extensions/IOPCIFamily.kext was
installed improperly and cannot be
used.（或者是 AppleACPIPlatform.kext）。这不是刚才替换的那两个老版本的文件么，啊，想起来了，刚才在 Win
7 里用 MacDrive 把两个文件复制过去之后，还应该要修改权限并删除缓存呢，这些都还没有做，能让我把系统启动起来就很不错了。赶紧打开 Console，依次输入下面这些命令（如果当前用户不是 root，还需要在命令前面加 sudo）（另外命令中的 &lt;tt class="docutils literal"&gt;Mac\ OS&lt;/tt&gt; 需要替换成你的 Mac 系统所在分区的卷标）（忘了试一试直接用 /System/Linrary 行不行了，应该是同一个目录的）：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; /Volumes/Mac&lt;span class="se"&gt;\ &lt;/span&gt;OS/System/Library
chmod -R &lt;span class="m"&gt;755&lt;/span&gt; Extensions
chown -R root:wheel Extensions
kextcache -v &lt;span class="m"&gt;1&lt;/span&gt; -l -s -n -t -arch i386 -arch x86_64 -m /Volumes/Mac&lt;span class="se"&gt;\ &lt;/span&gt;OS/System/Library/Caches/com.apple.kext.caches/Startup/Extensions.mkext /Volumes/Mac&lt;span class="se"&gt;\ &lt;/span&gt;OS/System/Library/Extensions
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;完成之后重启系统，就不会再遇到那样的错误提示了。&lt;/p&gt;
&lt;p&gt;好像都完成了呢，兴冲冲地准备截图纪念，但是……按了 Cmd+Shift+3 之后，听到咔嚓一声，但桌面上却什么都没出来，咋回事呢？看样子显卡驱动也有问题，虽然可以调节分辨率，但无法截屏，也无法用系统自带的 Previewer 查看图片（双击打开图片只能看到白色）。唉，继续奋斗。&lt;/p&gt;
&lt;p&gt;我之前用的显卡驱动是 NVinject
0.2.1，改成最新的 0.2.2 也不好使，而且更差劲，连分辨率都无法改变了。找了好久，其实我以前用的是 NVEnabler64，但上次装 10.6.3 的时候就不能使用了（因为我用的是 32 位吧），这次也没有希望。最后还是投入 DSDT 的怀抱。不过我可不会写 DSDT，在网上找了一个（&lt;a class="reference external" href="http://bbs.pcbeta.com/viewthread-804563-1-1.html"&gt;http://bbs.pcbeta.com/viewthread-804563-1-1.html&lt;/a&gt;），号称搞定了关机、重启、休眠、断电、原生电源管理、原生显卡驱动、解决 BIOS 重置、以及将 BCM 无线网卡识别为内置。把 NVinject.kext 去掉，把 dsdt.aml 放在 BootThink 的 Darwin 目录下。重启电脑，Win
7 突然蓝屏了，不知道怎么回事。不管它。&lt;/p&gt;
&lt;p&gt;启动 Mac，又不动了，似乎是声卡出问题了，暂时把 VoodooHDA.kext 去掉吧。顺利进入系统，刚登录的时候就已经感觉到不同了，很明显地登录窗口的动态效果、系统状态栏的半透明都是以前没有的。测试一下，果然可以截图、可以双击查看图片了，分辨率调节也有，不错。而且测试了一下关机断电，也没问题呢，之前 10.6.3 的时候其实关机是不会断电的，每次我都是重启然后在按电源键关机。&lt;/p&gt;
&lt;p&gt;刚才那个 dsdt.aml 既然能够解决那么多问题，就意味着我可以去掉好多 kext 了，总共去掉了以下这些 kext：&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;NullCPUPowerManagement.kext：禁用电源管理，解决 IntelCPUPowerManagement.kext 的 HPET 错误。&lt;/li&gt;
&lt;li&gt;OpenHaltRestart.kext：解决重启或关机问题。&lt;/li&gt;
&lt;li&gt;OSXRestart.kext：解决重启问题。&lt;/li&gt;
&lt;li&gt;PlatformUUID.kext：解决 UUID 错误。&lt;/li&gt;
&lt;li&gt;IOAHCIBlockStorageInjector.kext：解决本地硬盘图标为橙色的补丁。&lt;/li&gt;
&lt;li&gt;AppleRTC.kext：装 10.6.3 的时候不知道这是干什么用的，但似乎是 Real Time
Clock 的驱动，应该是修改过的，主要是解决某些主板上，睡眠唤醒后 BIOS 重置的问题。&lt;/li&gt;
&lt;li&gt;LegacyAppleAirPortBrcm4311.kext：BRCM 无线网卡的驱动，对我来说根本没用，上次放着它主要是希望奇迹能够发生，然而我那个无线网卡身上似乎不会有奇迹出现。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;最后还是要面对声卡的问题，我又尝试着把 AppleHDA.kext 去掉，换上 VoodooHDA.kext，嘿，还真就好了。不知道最开始的时候有 VoodooHDA.kext，为什么还必须放 AppleHDA.kext。或者因为我之前那个 VoodooHDA.kext 太老了吧。&lt;/p&gt;
&lt;p&gt;除了 wifi 不能用之外还有个问题，就是这次没办法休眠了（10.6.3 的时候好像是可以的）。不过据说 10.6.8 和 Lion 的休眠都很难，得拼人品。我是放弃了，因为 SleepEnabler.kext 跟 10.6.8 也不兼容呢，等更新吧。现在如果休眠的话，屏幕变黑，然后就什么都没有了，睡不下去，也叫不起来，只能强制关机。还好我很少用休眠。&lt;/p&gt;
&lt;p&gt;呼，冒险升了次级，结果还是比较满意的，截图纪念。&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="Mac OS 10.6.8 on Dell E6400" src="https://blog.gocalf.com/images/2011/08/mac_10.6.8_screenshot.png" /&gt;
&lt;p class="caption"&gt;Mac OS 10.6.8 on Dell E6400&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;最后把用到的 kext 之类的都放在这里吧。&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;放在 BootThink 的 Darwin 目录下：&lt;ul&gt;
&lt;li&gt;&lt;a class="reference external" href="https://blog.gocalf.com/assets/2011/08/dsdt.aml_.zip"&gt;dsdt.aml&lt;/a&gt;：可以搞定关机、重启、休眠、断电、原生电源管理、原生显卡驱动、解决 BIOS 重置、以及将 BCM 无线网卡识别为内置。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;放在 BootThink 的 Darwin\System\LibrarySL\Extensions 目录下：&lt;ul&gt;
&lt;li&gt;系统补丁&lt;ul&gt;
&lt;li&gt;&lt;a class="reference external" href="https://blog.gocalf.com/assets/2011/08/FakeSMC.kext_.zip"&gt;FakeSMC.kext&lt;/a&gt;：黑苹果机必须的！一方面是对 Mac
OS 必须的 AppleSMC.kext（System Management
Controller）的模拟；另一方面仿造苹果的 Dont Steal Mac OS
X.kext（苹果系统与苹果机器 EFI 模块之间的通信加密解密）。&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://blog.gocalf.com/assets/2011/08/Disabler.kext_.zip"&gt;Disabler.kext&lt;/a&gt;：屏蔽不能正常启动的补丁。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Audio&lt;ul&gt;
&lt;li&gt;&lt;a class="reference external" href="https://blog.gocalf.com/assets/2011/08/IOAudioFamily.kext_.zip"&gt;IOAudioFamily.kext&lt;/a&gt;：基本的声卡驱动框架。&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://blog.gocalf.com/assets/2011/08/OSvKernDSPLib.kext_.zip"&gt;OSvKernDSPLib.kext&lt;/a&gt;：内核的数字音频信号处理库。&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://blog.gocalf.com/assets/2011/08/HDAEnabler.kext_.zip"&gt;HDAEnabler.kext&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://blog.gocalf.com/assets/2011/08/VoodooHDA.kext_.zip"&gt;VoodooHDA.kext&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Ethernet&lt;ul&gt;
&lt;li&gt;&lt;a class="reference external" href="https://blog.gocalf.com/assets/2011/08/IONetworkingFamily.kext_.zip"&gt;IONetworkingFamily.kext&lt;/a&gt;：基本的网卡驱动，有些网卡可以直接驱动。里面包含 AppleBCM5701Ethernet.kext，AppleIntel8254XEthernet.kext，AppleRTL8139Ethernet.kext，AppleRTL8169Ethernet.kext，AppleUSBEthernet.kext，AppleUSBGigEthernet.kext，AppleYukon2.kext，Intel82574L.kext，nvenet.kext。&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://blog.gocalf.com/assets/2011/08/Intel82566MM.kext_.zip"&gt;Intel82566MM.kext&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;PS/2（鼠标、键盘、触摸板）&lt;ul&gt;
&lt;li&gt;&lt;a class="reference external" href="https://blog.gocalf.com/assets/2011/08/ApplePS2Controller.kext_.zip"&gt;ApplePS2Controller.kext&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://blog.gocalf.com/assets/2011/08/AppleACPIPS2Nub.kext_.zip"&gt;AppleACPIPS2Nub.kext&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;电源管理、Battery&lt;ul&gt;
&lt;li&gt;&lt;a class="reference external" href="https://blog.gocalf.com/assets/2011/08/AppleACPIPlatform.kext_.zip"&gt;AppleACPIPlatform.kext&lt;/a&gt;：（升级到 10.6.8 后要复制到 Mac 分区的 /System/Library/Extensions，修改权限并更新缓存）这是 Advanced
Configuration and Power
Interface 高级配置和电源管理接口驱动，进行电源管理，睡眠，Real-Time
Clock 控制等，其下还包含 AppleACPIButtons.kext，AppleACPIEC.kext，AppleACPIPCI.kext。&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://blog.gocalf.com/assets/2011/08/IOACPIFamily.kext_.zip"&gt;IOACPIFamily.kext&lt;/a&gt;：作用于支持 ACPI 电源管理标准的驱动，例如电源按钮、电池、PS/2、USB、HPET 等。这里的这个解决了部分笔记本风扇不正常问题，只支持 32 位。&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://blog.gocalf.com/assets/2011/08/VoodooBattery.kext_.zip"&gt;VoodooBattery.kext&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Bluetooth&lt;ul&gt;
&lt;li&gt;&lt;a class="reference external" href="https://blog.gocalf.com/assets/2011/08/DellBluetoothHCI.kext_.zip"&gt;DellBluetoothHCI.kext&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;SD Reader&lt;ul&gt;
&lt;li&gt;&lt;a class="reference external" href="https://blog.gocalf.com/assets/2011/08/VoodooSDHC.kext_.zip"&gt;VoodooSDHC.kext&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;PCMCIA&lt;ul&gt;
&lt;li&gt;&lt;a class="reference external" href="https://blog.gocalf.com/assets/2011/08/IOPCIFamily.kext_.zip"&gt;IOPCIFamily.kext&lt;/a&gt;：（升级到 10.6.8 后要复制到 Mac 分区的 /System/Library/Extensions，修改权限并更新缓存）PCI 设备的基本驱动。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Chip set&lt;ul&gt;
&lt;li&gt;&lt;a class="reference external" href="https://blog.gocalf.com/assets/2011/08/AHCIPortInjector.kext_.zip"&gt;AHCIPortInjector.kext&lt;/a&gt;：可以识别 Intel 芯片组的 AHCI（如果无法正确识别 AHCI，启动时有可能会 hang 在 Still
Waiting for Root Device）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;继续啃苹果咯～&lt;/p&gt;
</content><category term="操作系统"></category><category term="Hackintosh"></category></entry><entry><title>Dell E6400 安装 MacOS 雪豹 10.6</title><link href="https://blog.gocalf.com/dell-e6400-install-mac" rel="alternate"></link><published>2011-07-24T18:08:00+08:00</published><updated>2012-03-02T21:46:00+08:00</updated><author><name>Calf</name></author><id>tag:blog.gocalf.com,2011-07-24:/dell-e6400-install-mac</id><summary type="html">&lt;p class="first last"&gt;半年前在 Dell Latitude E6400 上安装了 Mac OS X Snow Leopard 10.6（与 Windows 7 并存），除了 WiFi 之外都挺好的，折腾了好久才搞定，现在又有些记不清了，所以要赶紧留下印记，以免过几天就忘光了。&lt;/p&gt;
</summary><content type="html">
&lt;p&gt;半年前在 Dell Latitude E6400 上安装了 Mac OS X Snow Leopard 10.6（与 Windows
7 并存），除了 WiFi 之外都挺好的，折腾了好久才搞定，现在又有些记不清了，所以要赶紧留下印记，以免过几天就忘光了。&lt;/p&gt;
&lt;p&gt;不知道为什么，这次装 10.6 非常的费劲，尝试了好几个不同的版本（包括原版、iAntares、精简版等等），尝试了光盘安装、硬盘安装，尝试了 BootThink 引导、变色龙引导，用了一周多的时间才搞成功。相比之下，之前装 10.5.5～10.5.7 都非常容易呢。&lt;/p&gt;
&lt;p&gt;在 PC 上装 Mac 的教程满天飞，这里不打算详细讲述，就以跟 Dell
E6400 有关的部分和遇到的一些问题为主吧，这款机器似乎是最难装 Mac 的机器之一。&lt;/p&gt;
&lt;!-- more --&gt;
&lt;div class="section" id="dell-latitude-e6400"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="#id4"&gt;Dell Latitude E6400 硬件配置&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;为 PC 装 Mac 系统最头疼的当然是硬件驱动了，所以在安装前要先搞清楚机器的硬件情况。&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Chip set&lt;ul&gt;
&lt;li&gt;North Bridge: Intel Cantiga PM45&lt;/li&gt;
&lt;li&gt;Source Bridge: Intel 82801 IEM ICH9M-E&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;BIOS: Phoenix 05/11/09&lt;/li&gt;
&lt;li&gt;CPU: Intel Core2 Duo P9600 2800MHz (10.5 x 267)&lt;/li&gt;
&lt;li&gt;Memory: 2G*2, 800MHz Dual&lt;/li&gt;
&lt;li&gt;Storage: Intel ICH9M-E/M SATA AHCI Controller&lt;/li&gt;
&lt;li&gt;Video: nVIDIA Quadro NVS160M (256MB)&lt;/li&gt;
&lt;li&gt;Audio:  IDT 92HD 71B7 @ Intel 82801 IB ICH9 - High Definition Audio
Controller [A-3] PCI&lt;/li&gt;
&lt;li&gt;Display: 1440x900&lt;/li&gt;
&lt;li&gt;Network&lt;ul&gt;
&lt;li&gt;Ethernet: Intel 82567LG Gigabit Network Connection&lt;/li&gt;
&lt;li&gt;WiFi: Intel WiFi Link 5300 AGN（最让人头疼的硬件，驱动无解）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="#id5"&gt;工具和准备工作&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;下载了 Mac OS X
10.6 原版光盘镜像（尝试了很多其他处理好的镜像，全都无法正常安装，最后还是选择用原版），我用的是 snowleopard_10a432_userdvd.dmg（网上到处都能下载，我就不发链接了），6.13G。这么大就不刻盘了，用光盘装还慢呢。&lt;/p&gt;
&lt;p&gt;用硬盘安装的话，一般要给磁盘上新建两个分区，一个放安装盘镜像，一个装 Mac。前者 6.3G 左右（不要格式化），后者视个人需要，一般至少 20G（NTFS 格式）。我用的 BootThink 引导似乎要求被引导的系统（包括安装镜像和已经装好的系统）在主分区上，但我的硬盘上没有那么多主分区可以用了（一块硬盘最多可以有四个主分区，我已经有了三个，分别是 Win
7 保留分区，Win
7 系统分区，数据分区），因此就把最后一个主分区名额留给了 Mac 系统，而把安装盘镜像放到了移动硬盘上。同样注意放安装盘镜像的分区不要格式化。&lt;/p&gt;
&lt;p&gt;接下来安装 HFS-Explorer（v0.21），运行，按 Ctrl+O（菜单 File-&amp;gt;Load file
system from
file...），选择下载的安装盘镜像，在弹出的对话框里选择 Apple_HFS 那项。加载之后点击菜单 Tool-&amp;gt;Create
disk image...，将生成的文件（.dmg）保存在某个 NTFS 分区上即可。&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="hfs_explorer_hfs" src="https://blog.gocalf.com/images/2011/07/hfs_explorer_hfs.png"/&gt;
&lt;p class="caption"&gt;HFS-Explorer 选择 Partition&lt;/p&gt;
&lt;/div&gt;
&lt;div class="figure"&gt;
&lt;img alt="hfs_explorer_view" src="https://blog.gocalf.com/images/2011/07/hfs_explorer_view.png"/&gt;
&lt;p class="caption"&gt;在 HFS-Explorer 中查看安装盘镜像&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;使用 HFS-Explorer 把下载的安装盘镜像处理一下生成另外一个镜像，主要有三个作用：&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;有些镜像格式无法被后面用到的安装助手识别，这个工具可以做一次格式转换；&lt;/li&gt;
&lt;li&gt;去掉原镜像的写保护，以便稍后替换 OSInstall（也可以直接下载一个别人替换过的镜像，那就不用装这个工具了，也可以跳过后面的 MacDriver）；&lt;/li&gt;
&lt;li&gt;可以对原镜像文件做检验。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;接下来就要祭出 Leopard 硬盘安装助手（v0.3）了。它不需要安装，但在 Win
7 系统中必须以管理员身份运行（右键点击，选择 Run as
administrator）。载入刚才用 HFS-Explorer 生成的镜像文件，选择之前分好的 6.3G 左右未格式化的分区，并去掉三个复选框的勾（在 boot.ini 中加入 tboot；强制加入引导及启动代码；PC_EFI
V8）。点击“开始！”按钮，然后耐心等待。当进度条走满，日志中出现“Change
partition type to AF: Success”、“All done, have fun!”时就算成功了。&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="lepoard-inshelper" src="https://blog.gocalf.com/images/2011/07/lepoard-inshelper.png"/&gt;
&lt;p class="caption"&gt;Leopard 硬盘安装助手&lt;/p&gt;
&lt;/div&gt;
&lt;div class="compound"&gt;
&lt;p class="compound-first"&gt;接下来要替换 OSInstall，这需要安装工具 MacDriver（v8.0.4.10），这是个收费软件。装好之后重启系统，就可以进入刚才用硬盘安装助手写入的 HFS 安装分区了。让 Windows 显示隐藏文件和系统文件，下载一个 PC 用的 OSInstall，替换掉&lt;/p&gt;
&lt;div class="compound-middle"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;X:\System\Library\PrivateFrameworks\Install.framework\Frameworks\OSInstall.framework\Versions\A\
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;&lt;p class="compound-last"&gt;里面的同名文件。这样做的目的是使得 Mac 可以安装在 MBR 分区表下（否则 Mac 只能装在 GPT（GUID）分区表下，但 Windows 默认都是用 MBR）。（还是直接下载一个已经替换好了的镜像吧，省的麻烦。）&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;最后还要装引导程序。以前我用的是变色龙引导程序，但这次总是出错，就改用 BootThink 了。觉得这个比变色龙还要好些吧。不过如果原有系统是 Win
7 的话，还稍微有一点儿麻烦，就是 Win
7 那个令人恶心的保留分区。虽然我们一般都把 Win
7 装在 C 盘，但在安装过程中，它会在 C 盘前面保留一个 100MB 左右的 NTFS 分区（卷标一般就叫 System
Reserved），而这个分区默认是不显示出来的（没有分配盘符）。如果把 BootThink 装在 C 盘，那有可能会无法进行引导。所以要把它装在那个保留分区里（幸好它体积不是很大）。在磁盘管理中找到那个保留分区，给它指定一个盘符（我习惯用 B），然后把 BootThink 装在这个分区中。（有人说把 C 盘标记为活动分区就可以启动 BootThink，但我没有成功。）安装之后在目标分区的根目录应该有一个文件夹 Darwin 和两个文件 btldr（系统文件）、btldr.mbr。&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id2"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="#id6"&gt;准备驱动程序&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;网上那些破解过的 Mac 安装镜像里面通常都包含了各种驱动程序，在安装的时候选择需要的就可以了，但不知道为什么我这次怎么都装不成功，所以才用了原版的镜像。但原版镜像里没有 PC 的驱动程序，这就要借助 BootThink 了。用 BootThink 引导刚才制作的替换了 OSInstall 的硬盘安装分区，它就可以从 &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;C:\Darwin\System\LibrarySL\Extensions\&lt;/span&gt;&lt;/tt&gt; （我的是 &lt;tt class="docutils literal"&gt;B:\&lt;/tt&gt;）里面加载放在那里的驱动程序和补丁（不同版本的 Mac
OS 对应的目录也不太一样，这里就不多说了）。&lt;/p&gt;
&lt;p&gt;驱动的选择至关重要啊，选择的不好，轻则某个硬件不工作，重则四国、五国、风火轮（在系统加载时出现用四国或者五国文字写的提示信息，或者风火轮图标一直转却无法进入系统）。这里列出我选择的驱动和补丁。&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;系统补丁&lt;ul&gt;
&lt;li&gt;fakesmc.kext：模拟苹果机的 SMC，必须的！&lt;/li&gt;
&lt;li&gt;NullCPUPowerManagement.kext：禁用电源管理，解决 IntelCPUPowerManagement.kext 的 HPET 错误。&lt;/li&gt;
&lt;li&gt;OpenHaltRestart.kext：解决重启或关机问题。&lt;/li&gt;
&lt;li&gt;OSXRestart.kext：解决重启问题。&lt;/li&gt;
&lt;li&gt;PlatformUUID.kext：解决 UUID 错误。&lt;/li&gt;
&lt;li&gt;Disabler.kext：屏蔽不能正常启动的补丁。&lt;/li&gt;
&lt;li&gt;IOAHCIBlockStorageInjector.kext：解决本地硬盘图标为橙色的补丁。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Video&lt;ul&gt;
&lt;li&gt;NVinject.kext&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Audio&lt;ul&gt;
&lt;li&gt;IOAudioFamily.kext&lt;/li&gt;
&lt;li&gt;HDAEnabler.kext&lt;/li&gt;
&lt;li&gt;VoodooHDA.kext&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Ethernet&lt;ul&gt;
&lt;li&gt;IONetworkingFamily.kext&lt;/li&gt;
&lt;li&gt;Intel82566MM.kext&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;WiFi&lt;ul&gt;
&lt;li&gt;:-( 我那无解的无线网卡，凑合用了个 LegacyAppleAirPortBrcm4311.kext，不五国，也没效果&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;PS/2（鼠标、键盘、触摸板）&lt;ul&gt;
&lt;li&gt;ApplePS2Controller.kext（或者 VoodoPS2Controller.kext）&lt;/li&gt;
&lt;li&gt;AppleACPIPS2Nub.kext&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Battery&lt;ul&gt;
&lt;li&gt;VoodooBattery.kext&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Bluetooth&lt;ul&gt;
&lt;li&gt;DellBluetoothHCI.kext&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;SD Reader&lt;ul&gt;
&lt;li&gt;VoodooSDHC.kext&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;PCMCIA&lt;ul&gt;
&lt;li&gt;IOPCIFamily.kext&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Chip set&lt;ul&gt;
&lt;li&gt;AHCIPortInjector.kext：可以识别 Intel 芯片组的 AHCI。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;风扇&lt;ul&gt;
&lt;li&gt;IOACPIFamily.kext：解决部分笔记本风扇不正常问题，只支持 32 位。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;还有几个已经不记得是干什么用的了&lt;ul&gt;
&lt;li&gt;AppleRTC.kext&lt;/li&gt;
&lt;li&gt;OSvKernDSPLib.kext&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id3"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="#id7"&gt;安装&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;动手安装之前还要注意几件事情。&lt;/p&gt;
&lt;p&gt;首先是 Snow
Lopard 需要 SATA 硬盘支持，所以要确认 BIOS 中 SATA 模式设定为 AHCI（默认可能是 IRRT）。&lt;/p&gt;
&lt;p&gt;BootThink 的一些操作：&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;c：Leopard 原版光盘启动；&lt;/li&gt;
&lt;li&gt;Alt：进入 startup manager，选取启动分区；&lt;/li&gt;
&lt;li&gt;Shift：安全模式；&lt;/li&gt;
&lt;li&gt;Ctrl+V（或 -v）：Verbose 模式；&lt;/li&gt;
&lt;li&gt;Ctrl+S：单用户模式；&lt;/li&gt;
&lt;li&gt;#g=WxHxDEPTH（如 1440x900x32）：设置分辨率；&lt;/li&gt;
&lt;li&gt;#g=~：取消分辨率设置；&lt;/li&gt;
&lt;li&gt;-32：以 32 位模式启动。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我的 E6400 用 64 位总是有些驱动有问题，只好用 32 位了。在安装和启动 Mac 的时候，都要在 BootThink 里输入 &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;-x32&lt;/span&gt;&lt;/tt&gt;，或者修改 &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;B:\Darwin\com.apple.Boot.plist&lt;/span&gt;&lt;/tt&gt;，添加 Kernel
Flags，值为 &lt;tt class="docutils literal"&gt;arch=i386&lt;/tt&gt;。我的此文件内容如下：&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;?xml version="1.0" encoding="UTF-8"?&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;&amp;lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;plist&lt;/span&gt; &lt;span class="na"&gt;version=&lt;/span&gt;&lt;span class="s"&gt;"1.0"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;dict&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;key&amp;gt;&lt;/span&gt;EthernetBuiltIn&lt;span class="nt"&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;string&amp;gt;&lt;/span&gt;Yes&lt;span class="nt"&gt;&amp;lt;/string&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;key&amp;gt;&lt;/span&gt;Graphics Mode&lt;span class="nt"&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;string&amp;gt;&lt;/span&gt;1440x900x32&lt;span class="nt"&gt;&amp;lt;/string&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;key&amp;gt;&lt;/span&gt;GraphicsEnabler&lt;span class="nt"&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;string&amp;gt;&lt;/span&gt;y&lt;span class="nt"&gt;&amp;lt;/string&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;key&amp;gt;&lt;/span&gt;Instant Menu&lt;span class="nt"&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;string&amp;gt;&lt;/span&gt;No&lt;span class="nt"&gt;&amp;lt;/string&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;key&amp;gt;&lt;/span&gt;Kernel&lt;span class="nt"&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;string&amp;gt;&lt;/span&gt;mach_kernel&lt;span class="nt"&gt;&amp;lt;/string&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;key&amp;gt;&lt;/span&gt;Kernel Flags&lt;span class="nt"&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;string&amp;gt;&lt;/span&gt;arch=i386&lt;span class="nt"&gt;&amp;lt;/string&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;key&amp;gt;&lt;/span&gt;Timeout&lt;span class="nt"&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;string&amp;gt;&lt;/span&gt;3&lt;span class="nt"&gt;&amp;lt;/string&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;key&amp;gt;&lt;/span&gt;UHCIreset&lt;span class="nt"&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;string&amp;gt;&lt;/span&gt;Yes&lt;span class="nt"&gt;&amp;lt;/string&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;key&amp;gt;&lt;/span&gt;device-properties&lt;span class="nt"&gt;&amp;lt;/key&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;string&amp;gt;&amp;lt;/string&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/dict&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/plist&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;好了，重启电脑，进入 BootThink 引导，选择启动 Mac 安装盘分区。成功话可以看到苹果图标和风火轮，选择语言，然后就进入安装界面。这时候要对目标分区做格式化，点击菜单“实用工具 -&amp;gt; 磁盘工具...”，在对话框中选择之前格式化成 NTFS 的空白分区，将选择模式“Mac
OS 扩展（日志式）”，填写卷标，点击“抹掉”。成功之后关闭窗口，继续安装，接受软解许可协议，然后就是选择安装组件。有人建议不用选“打印机支持”，太占体积了。选好之后继续，选择刚才格式化好的目标分区，点击安装。&lt;/p&gt;
&lt;p&gt;如果是用硬盘安装的话，不用等太久就装好了。装好之后会自动重启，不过由于安装过程中，Windows 系统盘的活动分区属性被取消了，如果直接重启将无法进入 Windows，可以利用重启前的一点时间处理一下。点击菜单“实用工具 -&amp;gt; 终端”，用 diskutil 命令来设置活动分区。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# diskutil list
... blah blah ...（查看 C:\ 在哪里，比如我的在 /dev/disk0 分区 1）
# fdisk -e /dev/disk0
f 1
w
y
quit
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;重启电脑，进入 BootThink，这时候就可以看到安装好的 Mac 系统分区了，引导它启动即可（如果装的是 32 位，也没改 &lt;tt class="docutils literal"&gt;com.apple.Boot.plist&lt;/tt&gt;，就需要输入 &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;-x32&lt;/span&gt;&lt;/tt&gt; 以 32 位模式启动）。&lt;/p&gt;
&lt;p&gt;运气不背的话就可以顺利进入 Mac 系统了，声音、图像、有线网络、触摸板等全都正常，唯一的遗憾是无线网卡不能使用（也不知道这半年来出了新的驱动没）。可以买个 USB/PCMCIA 无线网卡，也可以像我一样扯根网线。&lt;/p&gt;
&lt;/div&gt;
</content><category term="操作系统"></category><category term="Hackintosh"></category></entry><entry><title>隐藏磁盘分区 Q</title><link href="https://blog.gocalf.com/hide-drive-q" rel="alternate"></link><published>2011-07-15T23:34:00+08:00</published><updated>2011-08-03T20:57:00+08:00</updated><author><name>Calf</name></author><id>tag:blog.gocalf.com,2011-07-15:/hide-drive-q</id><summary type="html">&lt;p class="first last"&gt;本文介绍如果隐藏 Windows 7 中那讨厌的无法访问的磁盘分区 Q。&lt;/p&gt;
</summary><content type="html">&lt;p&gt;在 Windows 7 操作系统中，有些用户可能会在我的电脑（My
Computer）中看到一个盘符为 &lt;strong&gt;Q&lt;/strong&gt; 的本地磁盘分区，在磁盘管理中看不到它，无法访问它，也无法删除它。这个恼人的分区图标虽然不会有什么实际的影响，但似乎总是在眼前晃悠，不得不让人想要立刻干掉它。其实要去掉它是非常容易的，让我们一起来看一下。&lt;/p&gt;
&lt;!-- more --&gt;
&lt;div class="figure"&gt;
&lt;img alt="disk-q-unaccess" src="https://blog.gocalf.com/images/2011/07/disk-q-unaccess.png" /&gt;
&lt;p class="caption"&gt;无法访问的虚拟磁盘分区 Q&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;这个磁盘分区 Q 是 Microsoft Application Virtualization
Desktop（App-V）使用的一个虚拟分区，我也不记得是装了什么之后它就出现了。要隐藏它只要以下几个简单的步骤：&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="disk-q-registry" src="https://blog.gocalf.com/images/2011/07/disk-q-registry.png" /&gt;
&lt;p class="caption"&gt;修改注册表，添加高亮的两个 DWORD 值&lt;/p&gt;
&lt;/div&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;按 Win+R，输入 regedit 并回车，打开注册表编辑器；&lt;/li&gt;
&lt;li&gt;找到 HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer&lt;/li&gt;
&lt;li&gt;在 Explorer 这个键值下添加如下两个 DWORD（32 位）值：&lt;ol class="arabic"&gt;
&lt;li&gt;第一个名为 &lt;tt class="docutils literal"&gt;NoDrives&lt;/tt&gt;，值为 16 进制的 &lt;tt class="docutils literal"&gt;10000&lt;/tt&gt;，也就是十进制的 &lt;tt class="docutils literal"&gt;65536&lt;/tt&gt;；&lt;/li&gt;
&lt;li&gt;第二个名为 &lt;tt class="docutils literal"&gt;NoViewOnDrive&lt;/tt&gt;，值同样是 16 进制的 &lt;tt class="docutils literal"&gt;10000&lt;/tt&gt;；&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;重启一下 explorer 即可。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;再次进入我的电脑，就可以看到那讨厌的 Q 分区消失了。&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="disk-q-hidden" src="https://blog.gocalf.com/images/2011/07/disk-q-hidden.png" /&gt;
&lt;p class="caption"&gt;虚拟分区 Q 被隐藏&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;如果对注册表不是非常熟悉的话，请千万谨慎操作。另外可以参考微软官方文档 &lt;a class="reference external" href="http://support.microsoft.com/kb/931626/en-us"&gt;How to hide and to restrict access to the App-V (SoftGrid) client drive letter&lt;/a&gt;，这里有更加细致入微的步骤说明，以及其他殊途同归的方法。&lt;/p&gt;
&lt;p&gt;有人或许会对上面添加的两个 16 进制 10000 感兴趣，为什么是这个数，它有什么特殊含义？其实 IT 人很容易发现这个数在二进制中就是 1 后面跟 16 个零，如果看作 bit
mask 的话，就是从最低位开始的第 17 位；而 Q 在字母表中恰好也是第 17 个字母。所以如果想要隐藏别的分区（Why?
:-p），就根据分区盘符的字母顺序修改上述两个 16 进制数值即可。比如改成 16 进制的 4（bit
mask 第三位），那 C 盘就消失了：&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="disk-c-hidden" src="https://blog.gocalf.com/images/2011/07/disk-c-hidden.png" /&gt;
&lt;p class="caption"&gt;用 16 进制 4 隐藏磁盘分区 C&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;在微软的 Knowledge
Base 中也提供了类似的隐藏磁盘分区的方法，其中也有详细的磁盘分区盘符与二进制数之间的对应关系，详情请见 &lt;a class="reference external" href="http://support.microsoft.com/kb/231289"&gt;Using Group Policy Objects to hide specified drives&lt;/a&gt;。&lt;/p&gt;
</content><category term="操作系统"></category><category term="Windows 7"></category></entry><entry><title>Windows 7 上帝模式</title><link href="https://blog.gocalf.com/win7-god-mode" rel="alternate"></link><published>2011-07-14T17:48:00+08:00</published><updated>2011-08-03T20:57:00+08:00</updated><author><name>Calf</name></author><id>tag:blog.gocalf.com,2011-07-14:/win7-god-mode</id><summary type="html">&lt;p class="first last"&gt;在 Windows 7 里，“上帝” 能做什么？&lt;/p&gt;
</summary><content type="html">&lt;p&gt;在 Windows 7 里，“上帝” 能做什么？&lt;/p&gt;
&lt;p&gt;一个简单的方法就可以调出调整 Windows 7 系统里全部功能的面板，这个小小的技巧可以让你控制你电脑中的一切。&lt;/p&gt;
&lt;!-- more --&gt;
&lt;p&gt;启动“上帝模式”的方法非常简单，随便找个地方建立一个文件夹，将其命名为 &lt;tt class="docutils literal"&gt;&lt;span class="pre"&gt;GodMode.{ED7BA470-8E54-465E-825C-99712043E01C}&lt;/span&gt;&lt;/tt&gt;，当然这里的“GodMode”不是必须的，可以选择任何喜欢的名字，起作用的是小数点后面的 GUID。&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="创建 GodMode 文件夹" src="https://blog.gocalf.com/images/2011/07/godmode1.png" /&gt;
&lt;p class="caption"&gt;创建 GodMode 文件夹&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;回车之后，“上帝”就现身了。&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="创建 GodMode 文件夹" src="https://blog.gocalf.com/images/2011/07/godmode2.png" /&gt;
&lt;p class="caption"&gt;Win7 God Mode Overview&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;进入此文件夹，一坨坨系统设置就在那里恭候大驾了。&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="创建 GodMode 文件夹" src="https://blog.gocalf.com/images/2011/07/godmode3.png" /&gt;
&lt;p class="caption"&gt;Windows 7 上帝模式&lt;/p&gt;
&lt;/div&gt;
</content><category term="操作系统"></category><category term="Windows 7"></category></entry></feed>